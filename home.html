<!DOCTYPE html>
<html lang="en">

<head>
    <title>Zavi cho máy tính</title>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description"
        content="Zavi là giải pháp họp trực tuyến an toàn và tiện lợi, chỉ cần tài khoản Zalo để bắt đầu sử dụng.">
    <link rel="icon" href="{{DOMAIN_RES}}/img/zavi_thumb.png">
    <!-- <link rel="stylesheet" href="{{DOMAIN_RES}}/css/style.css"> -->
    <link rel="stylesheet" href="https://zavi.me/public/css/style.css">
    <link type="image/x-icon" href="{{DOMAIN_RES}}/img/zavi_thumb.png" rel="shortcut icon">
    <meta property="og:title" content="Zavi cho máy tính" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="{{DOMAIN_RES}}/img/zavi_thumb.png" />
    <meta name="robots" content="noindex">
    <meta name="googlebot" content="noindex">
</head>

<body class="new-landing">
    <section class="menu">
        <div class="container flx">
            <a href="{{ZAVI_HOMEPAGE}}" class="menu__logo">
                <img src="{{DOMAIN_RES}}/img/logo.png" alt="logo zalo">
            </a>
        </div>
    </section>
    <div class="launching">
        <div class="launching--background">
            <div id="launching__info__id">
                <p class="launching__title">Mở ứng dụng...</p>
                </p>
                <p class="launching__please-open">Vui lòng nhấn mở ứng dụng tại cửa sổ thông báo</p>
            </div>
            <div id="download__info__id" style="display: none;">
                <p class="launching__title">Đang tải xuống...</p>
                </p>
                <p class="launching__please-open">Vui lòng nhấn <span class="launching__please-open__action"> Đồng ý
                        (Keep) </span> tại cửa sổ tải xuống và <span class="launching__please-open__action"> Cài đặt
                    </span>Zavi</p>
            </div>
            </p>
            <p class="launching__open-windown">Nếu cửa sổ thông báo không hiển thị ở trình duyệt,

                <a id="zidopen" href="#" onclick="launchApp()" class="launching__open-windown__link"> nhấp vào đây </a>
                để mở ứng dụng hoặc
                <!-- <a {{#ZAVI_DOWNLOAD}} href="{{ZAVI_DOWNLOAD}}" {{/ZAVI_DOWNLOAD}} class="launching__open-windown__link"
                    id="launching_download_url"> tải và khởi chạy Zavi </a> phucnh7-->
                <a {{#ZAVI_DOWNLOAD}} href="https://res-update-pc.zadn.vn/zavi/beta/win/ZaviSetup-21.6.1-Beta.10.exe"
                    class="launching__open-windown__link" id="launching_download_url"> tải và khởi chạy Zavi </a>
            </p>

            <p class="launching__download">Bạn có thể tải và cài đặt Zavi trực tiếp tại <a href="/"
                    class="launching__open-windown__link"> https://zavi.me </a>
            </p>
            </p>
        </div>
    </div>
    <section class="footer footer--margin">
        <div class="footer__last">
            <p>© 2020 Một sản phẩm của Zalo Group</p>
        </div>
    </section>
    <script type="text/javascript">
        if (navigator.userAgent.toLocaleLowerCase().indexOf("android") >= 0 ||
            navigator.userAgent.toLocaleLowerCase().indexOf("iphone") >= 0 ||
            navigator.userAgent.toLocaleLowerCase().indexOf("ipad simulator") >= 0 ||
            navigator.userAgent.toLocaleLowerCase().indexOf("ipad") >= 0 ||
            navigator.userAgent.toLocaleLowerCase().indexOf("iphone simulator") >= 0) {

            function launchIfCan() {
                // let url = "{{ZAVI_PROTOCOL}}"; phucnh7
                let url = "zavi://zavi.me/join?id=935503333386&token=51b0sck1yxMvJ2cKLSDSjwcc";
                console.log(url);
                document.location.href = url;
                try {
                    document.querySelector("#zidopen").setAttribute("href", url);
                } catch (e) { }
            }
            setTimeout(function () {
                launchIfCan();
            }, 100);
        }
        else {
            // function checkProtocol(e = "zavi://{{HOST_PROTOCAL_LAUCHING}}/join", t = (() => { })) { phucnh7
            function checkProtocol(e = "zavi://zavi.me/join", t = (() => { })) {
                try {
                    const E = "launching_download_url", _ = 5e3, //864e5
                        I = 3e3, z = "lst_inst", L = "https://res-update-pc.zadn.vn/zavi";
                    var n, o, i, r = (navigator.userAgent || "").toLowerCase(),
                        c = (/windows/.test(r), /ipad/.test(r)),
                        a = !c && /(iphone|ipod)/.test(r),
                        d = (!c && !a && /macintosh/.test(r),
                            !/android/.test(r) && /linux (i686|x86_64)/.test(r),
                            /cros/.test(r),
                            /firefox/.test(r),
                            /opera|opr\/[\d]+/.test(r)),
                        l = !d && /(msie|trident)/.test(r),
                        u = (r.indexOf("compatible") > -1 && r.indexOf("msie"), /edge\/(\d+)/.test(r)),
                        s = !d && !u && /chrome/.test(r) && /webkit/.test(r),
                        m = (!d && !u && !s && /safari/.test(r),
                            l && /(msie 8)/.test(r), /x64|win64|amd64|x86_64/.test(r), !1),
                        h = !1;
                    function f() {
                        if (!function () {
                            try {
                                let e = localStorage.getItem(z);
                                return !!(e && !isNaN(e) && Math.abs(Date.now() - +e) <= _)
                            } catch (e) { }
                            return !0
                        }()) {
                            try {
                                localStorage.setItem(z, Date.now())
                            } catch (e) { }
                            let e = document.getElementById(E);
                            if (e && e.href && e.href.startsWith(L))
                                return e.href, e.click(), !0
                        }
                        return !1
                    }
                    function p(e) {
                        if (!m) {
                            if (i && clearTimeout(i), i = null, m = !0, e)
                                t(!0);
                            else {
                                let e = !1;
                                try {
                                    e = f()
                                }
                                catch (e) { }
                                t(!e)
                            } y()
                        }
                    }
                    function v(e) {
                        try {
                            document.body.removeChild(e)
                        } catch (e) { }
                    }
                    function y() {
                        n && v(n)
                    }
                    function g() {
                        if (!document.hidden)
                            return document.removeEventListener("visibilitychange", g), void x()
                    }
                    function w() {
                        n && n.removeEventListener("blur", w),
                            document.hidden || p(!0)
                    }
                    function b(t = !0) {
                        if (!h)
                            if (h = !0, t) {
                                let t = document.getElementById("ziframelauncher");
                                t && v(t),
                                    (o = document.createElement("IFRAME")).setAttribute("id", "ziframelauncher"),
                                    o.setAttribute("style", "width:0;height:0;"),
                                    o.setAttribute("frameborder", "0"),
                                    o.src = e,
                                    document.body.appendChild(o)
                            } else
                                document.location.href = e
                    }
                    function x() {
                        document.hidden ? document.addEventListener("visibilitychange", g) : (n.style.display = "block", n.focus(), n.addEventListener("blur", w),
                            b(!0), i && clearTimeout(i),
                            i = setTimeout(() => {
                                i = null, document.hidden ? document.addEventListener("visibilitychange", g) : p(!1)
                            }, I))
                    }
                    !function () {
                        if (!s) return !1; let e = 0, t = navigator.userAgent.toLowerCase().match(/chrome\/([\d]+)/);
                        return t && (e = parseInt(t[1], 10)), e >= 40
                    }()
                        ? (b(!1), p(!0))
                        : (
                            document.getElementById("zinp_focus") && y(),
                            (n = document.createElement("INPUT")).setAttribute("id", "zinp_focus"),
                            n.setAttribute("style", "display:none;position:absolute;z-index:9999;width:1px;height:1px;max-width:1px;max-height:1px;top:0;left:0;color:white;border:white;background:white;outline:white;"),
                            document.body.appendChild(n),
                            setTimeout(x, 100))
                } catch (e) { t(!0) }
            }
            function changeLayoutToDownload() {
                try {
                    let e = document.getElementById("launching__info__id"),
                        t = document.getElementById("download__info__id");
                    e && t && (e.style.display = "none", t.style.display = "block")
                } catch (e) { }
            }
            function launchApp() {
                setTimeout(function () {
                    function e(e) {
                        var t = "";
                        try {
                            t = new URL(window.location.href).searchParams.get(e) || ""
                        } catch (n) {
                            t = function (e) {
                                try {
                                    e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                                    var t = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(location.search);
                                    return null === t ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
                                } catch (e) { }
                                return ""
                            }(e)
                        }
                        return /^[A-Za-z0-9+\/]+\={0,2}$/.test(t) || (t = ""), t
                    }
                    !function () {
                        if (!function () {
                            try {
                                if (navigator && navigator.platform) {
                                    let e = ["win32", "ipad simulator", "iphone simulator", "ipad", "iphone", "macintel"],
                                        t = navigator.platform.toLowerCase();
                                    if (-1 !== e.indexOf(t)) return !0
                                }
                            } catch (e) { console.error("[validDevice] ERR ", e) }
                            return !1
                        }())
                            return void console.info("[launch] not valid device");
                        let id = e("id"),
                            tk = e("token"),
                            t = e("t");

                        // o = "zavi://{{HOST_PROTOCAL_LAUCHING}}/join?id=" + encodeURIComponent(id) + "&token=" + encodeURIComponent(tk); phucnh7
                        const HOST_PROTOCAL_LAUCHING = "zavi.corp.zavi.me";
                        const protocol = (t === 'co') ? 'zavi-corp' : 'zavi';
                        const uri = `${protocol}://${HOST_PROTOCAL_LAUCHING}/join?id=` + encodeURIComponent(id) + "&token=" + encodeURIComponent(tk);

                        console.info("open url", uri);
                        checkProtocol(uri, e => { e || changeLayoutToDownload() })
                    }()
                }, 100);
            }
            launchApp();
        }
    </script>
</body>

</html>